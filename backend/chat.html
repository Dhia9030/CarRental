<!-- public/test.html -->
<!DOCTYPE html>
<html>

<head>
    <title>Chat Test</title>
</head>

<body>
    <input id="token" placeholder="Paste token here" style="width: 80%;" />
    <button onclick="connect()">Connect</button>
    <br><br>
    <input id="message" placeholder="Your message" />
    <button onclick="send()">Send</button>

    <div id="log" style="margin-top: 20px;"></div>

    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
    <script>
        let socket;

        function log(msg) {
            document.getElementById('log').innerHTML += `<div>${msg}</div>`;
        }

        function connect() {
            const token = document.getElementById('token').value;

            socket = io('http://localhost:3000', {
                auth: { token },
            });

            socket.on('connect', () => log('‚úÖ Connected'));
            socket.on('receiveMessage', (data) => log('üí¨ Message: ' + JSON.stringify(data)));
            socket.on('matched', (data) => log('üë• Matched: ' + JSON.stringify(data)));
            socket.on('noAdminsAvailable', () => log('‚ùó No admins available'));
            socket.on('disconnect', () => log('‚ùå Disconnected'));
        }

        function send() {
            const msg = document.getElementById('message').value;
            socket.emit('sendMessage', { content: msg });
        }
    </script>
</body>

</html>